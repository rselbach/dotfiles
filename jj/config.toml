#:schema https://jj-vcs.github.io/jj/latest/config-schema.json

[user]
email = "rselbach@rselbach.com"
name = "Roberto Selbach"

[ui]
default-command = "log"
log-synthetic-elided-nodes = true
diff-formatter = ":git"
editor = "nvim"

[ui.graph]
style = "curved"

[git]
abandon-unreachable-commits = false

[remotes.origin]
auto-track-bookmarks = "glob:*"

[signing]
behavior = "own"
backend = "gpg"
key = "59B18958FD2754F97C355D0E7D1ABF3FA1B59C43"

[templates]
git_push_bookmark = '"rselbach/*" ++ change_id.short()'

[colors]
# base customizations
"normal change_id" = { bold = true, fg = "magenta" }
"immutable change_id" = { bold = false, fg = "bright cyan" }

# used by log node template
"node" = { bold = true }
"node elided" = { fg = "bright black" }
"node working_copy" = { fg = "green" }
"node conflict" = { fg = "red" }
"node immutable" = { fg = "bright cyan" }
"node wip" = { fg = "yellow" }
"node normal" = { bold = false }

# used in other various templates
"text link" = { bold = true, fg = "magenta" }
"text warning" = { bold = true, fg = "red" }

[aliases]
ll = ["log", "-r", "all()", "-T", "builtin_log_detailed"]
l = ["log", "-r", "ancestors(reachable(@, mutable()), 2)"]
n = ["new"]
# move closest bookmark to current commit
tug = ["bookmark", "move", "--from", "closest_bookmark(@-)", "--to", "@-"]
# rebase current branch onto trunk
retrunk = ["rebase", "-d", "trunk()"]

# git alias ports
# view the current working tree status
s = ["status"]
# show the diff between the latest commit and the current state
d = ["diff"]
# show diff for a specific revision (usage: jj di @~3)
di = ["diff", "-r"]
# list all bookmarks (tags equivalent)
tags = ["bookmark", "list"]
# list all bookmarks (branches equivalent)
branches = ["bookmark", "list"]
# list all remotes
remotes = ["git", "remote", "list"]
# list contributors with commit counts
contributors = ["log", "-r", "all()", "-T", "author.email() ++ \"\\n\"", "--no-graph"]

[revset-aliases]
"closest_bookmark(to)" = "heads(::to & bookmarks())"
"fork_history(to, from)" = "fork_point(to | from)..@"

[template-aliases]
"format_timestamp(timestamp)" = "timestamp.ago()"
